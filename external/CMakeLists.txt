if (NOT MINIROS_USE_SYSTEM_BZIP)
	if (EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/bzip2)
		# Disabling bzip2 application.
		#set(ENABLE_APP OFF)
		# We will build bzip2 as a static library.
		set(ENABLE_SHARED_LIB OFF)
		set(ENABLE_STATIC_LIB ON)
		add_subdirectory(bzip2)
		set(BZIP2_FOUND TRUE PARENT_SCOPE)
		set(BZIP2_LIBRARIES bz2_static PARENT_SCOPE)
	else()
		message(SEND_ERROR "Missing directory \"${CMAKE_CURRENT_SOURCE_DIR}/bzip2\"")
		message(SEND_ERROR "Please run \"git submodule init --update\" to update submodules")
	endif()
endif()

if (NOT MINIROS_USE_SYSTEM_LZ4)
	if (EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/lz4)
		set (LZ4_BUILD_CLI OFF)
		set (LZ4_BUILD_LEGACY_LZ4C OFF)
		add_subdirectory(lz4/build/cmake)
	else()
		message(SEND_ERROR "Missing directory \"${CMAKE_CURRENT_SOURCE_DIR}/lz4\"")
		message(SEND_ERROR "Please run \"git submodule init --update\" to update submodules")
	endif()
endif()